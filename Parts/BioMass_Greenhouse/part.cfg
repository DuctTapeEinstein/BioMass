// Kerbal Space Program - Part Config
// made By Roboto
//

PART{

	// --- general parameters ---
	name = BioMass GreenHouse
	module = Part
	author = Roboto

	// --- asset parameters ---
	mesh = model.mu

	// --- node definitions ---
	node_stack_top = 0.0, 1.61, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -1.61, 0.0, 0.0, 1.0, 0.0, 2
	node_attach = 1.25, 0.0, 0.0, 1.0, 0.0, 0.0, 1


	// --- editor parameters ---
	TechRequired = largeElectrics
	entryCost = 8200
	cost = 3800
	category = Utility
	subcategory = 0
	title =   BioMass GreenHouse

	manufacturer = DG Aero-Space Renewables
	description = Sometimes you just need to stop and smell the flowers. With the Greenhouse module, you don't even need to stop; you can do so while zipping through space! When provided with proper nutrients and sunlight, it can be used to produce BioMass, or just to filter the air and provide a relaxing vista for weary Kerbal space travelers. With additional modules, the biomass can also be used to generate liquid fuel and oxidizer.

	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,1,1,1,0

	// --- standard part parameters ---
	mass = 5
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.3
	angularDrag = 2
	crashTolerance = 6
	breakingForce = 200
	breakingTorque = 200
	maxTemp = 2900
	fuelCrossFeed = True

	//Onboard modules

	MODULE 
	{
        name = BioAnimator
    }
	MODULE
	{
		name = ModuleGenerator
		requiresAllInputs = true
		activateGUIName = Lights On
		shutdownGUIName = Lights Off
		toggleActionName = Toggle Lights
		INPUT_RESOURCE
		{
			name = ElectricCharge
			rate = 2.0
		}
		OUTPUT_RESOURCE
		{
			name = light
			rate = 0.1
		}
    }

	//Shutters
	MODULE
	{
		name = ModuleDeployableSolarPanel
		animationName = door
		sunTracking = true
		raycastTransformName = glass
		pivotName =  glass
		isBreakable = false
		resourceName = light
		chargeRate = 1.0
		powerCurve
	 	{
			key = 206000000000 0 0 0
			key = 13599840256 1 0 0
			key = 68773560320 0.5 0 0
			key = 0 0 0 0
	 	}
	}
	//Biology notes:
	//2013-11-25  STH
	//BioMass has a density of 0.0180096
	//Arbitrary decision that 1 unit of biomass has to last 10,800 seconds
	//Therefore 0.0000925 units of biomass/second
	//Multiply the defaultvalues by 3.7 to bring greenhouse plants up to
	//bamboo growth rates.

	//Biological
	MODULE
	{
		///photosynthesis is about 4x respiration
	    name = KethaneConverter
	    Label = Photosynthesis
	    AlwaysActive = true
	    InputRates
	    {
	    	light = 0.1
	    	BioMass = 0.00034225 //0.0000925
	        CarbonDioxide = 0.0020067912 //0.000542376
	        Water = 0.000821696 //0.00022208
	    }
	    OutputRates
	    {
	    	//0.0000925*4=0.00037. Remember to add in the initial 
	    	//biomass of 0.0000925 to replace what was consumed in InputRates
	    	BioMass = 0.00171125 //0.0004625
	        Oxygen = 0.0014594872 //0.000394456
	    }
	}

	MODULE
	{
		//NOTE: respiration is 4x less than photosynthesis
	    name = KethaneConverter
	    Label = Respiration
	    AlwaysActive = true
	    InputRates
	    {
	    	BioMass = 0.00034225 //0.0000925
	        Oxygen = 0.0003648718 //0.000098614
	    }
	    OutputRates
	    {
	        CarbonDioxide = 0.0005017015 //0.000135594
	        Water = 0.000205424 //0.00005552
	    }
	}

	//---the resources it stores
	RESOURCE
	{
		name = BioMass
		amount = 1
		maxAmount = 40
	}
	RESOURCE
	{
		name = light
		amount = 0
		maxAmount = 0.1
	}
	RESOURCE
	{
		name = Oxygen
		amount = 0
		maxAmount = 200
	}
	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 200
	}
	RESOURCE
	{
		name = Water
		amount = 0
		maxAmount = 200
	}
}
